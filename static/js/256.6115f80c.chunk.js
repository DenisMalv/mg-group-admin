"use strict";(self.webpackChunkreact_homework=self.webpackChunkreact_homework||[]).push([[256],{5256:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var r=a(5892),t=a(2791),l=a(3400),o=a(184);const n=e=>{let{title:s,classList:a,value:r="",name:n,type:c,handleChange:i,error:d,errorMessage:m}=e;const u=(0,t.useRef)();return(0,o.jsxs)("label",{className:"input-lab ".concat(a),children:[(0,o.jsx)("span",{className:"input-lab-text",children:s}),(0,o.jsxs)("div",{className:"input-wrap",children:[(0,o.jsx)("input",{value:r,onChange:i,name:n,className:"form-input-iso ".concat(d?"error":""),type:c,ref:u,placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c\u02bc\u044f"}),(0,o.jsx)(l.Z,{classlist:"form-input-ico ".concat(d?"error":""),id:"warning",name:"warning",color:"#DD7A02",width:"24",height:"24"}),(0,o.jsx)(l.Z,{classlist:"form-input-ico ",id:"arrow-correct",name:"arrow-correct",color:"transparent",stroke:"#333C38",width:"24",height:"24"})]}),(0,o.jsx)("p",{className:"form-error-message ".concat(d?"error":""),children:m})]})},c=e=>{let{title:s,classList:a,value:r="",name:n,type:c,handleChange:i,error:d,errorMessage:m,options:u}=e;const[h,p]=(0,t.useState)(!1),[g,v]=(0,t.useState)((()=>{var e;return null===(e=u.find((e=>e.role===r)))||void 0===e?void 0:e.name})),w=(0,t.useRef)(null),x=e=>{w.current&&!w.current.contains(e.target)&&p(!1)};return(0,t.useEffect)((()=>(document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)})),[]),(0,o.jsxs)("div",{className:"select-label ".concat(a),ref:w,children:[(0,o.jsx)("p",{className:"select-label-text",children:s}),(0,o.jsxs)("div",{className:"select-wrapper",onClick:()=>{p(!h)},children:[(0,o.jsx)("input",{value:g,name:n,className:"form-select-iso ".concat(d?"error":""),type:c,readOnly:!0}),(0,o.jsx)(l.Z,{classlist:"form-select-icon ".concat(h?"open":""," ").concat(d?"":"show"),id:"select-arrow",name:"select-arrow",color:"transparent",stroke:"#333C38",width:"24",height:"24"}),(0,o.jsx)(l.Z,{classlist:"form-input-ico ".concat(d?"error":""),id:"warning",name:"warning",color:"#DD7A02",width:"24",height:"24"})]}),h&&(0,o.jsx)("ul",{className:"select-options",children:u.map(((e,s)=>(0,o.jsx)("li",{className:"select-option",onClick:()=>(e=>{v(e.name),i({target:{name:"role",value:e.role}}),p(!1)})(e),children:e.name},s)))}),(0,o.jsx)("span",{className:"select-error ".concat(d?"error":""),children:m})]})};var i=a(4164);const d=e=>{let{show:s,showInstant:a,onClose:r,children:n,overlayRef:c}=e;return(0,t.useEffect)((()=>{document.body.style.overflow=s?"hidden":"unset",setTimeout((()=>{var e;return c&&(null===(e=c.current)||void 0===e?void 0:e.classList.toggle("modal-overlay-show"))}),4)}),[c,s]),s||a?i.createPortal((0,o.jsx)("div",{className:"modal-overlay ".concat(a?"modal-overlay-show":""),onMouseUp:r,ref:c,children:(0,o.jsxs)("div",{className:"modal-content br-24-to-20",onMouseUp:e=>e.stopPropagation(),children:[(0,o.jsx)("button",{className:"modal-close",onMouseUp:r,children:(0,o.jsx)(l.Z,{classlist:"step-four-icon-close",id:"login-restore-close",name:"close",stroke:"#fff",width:"24",height:"24"})}),n]})}),document.getElementById("modal-root")):null};var m=a(8450),u=a(9230);const h=e=>{let{title:s,type:a,data:r,classList:t,handleClick:l,accent:n}=e;return n?(0,o.jsx)("button",{type:a,className:"second-button br-12 ".concat(t),onClick:l,disabled:r&&""===r.email&&""===r.password,children:s}):(0,o.jsx)("button",{type:a,className:"second-button-white br-12 ".concat(t),onClick:l,disabled:r&&""===r.email&&""===r.password,children:s})};var p=a(6871),g=a(1306),v=a(5048),w=a(1360);const x=e=>{let{userData:s}=e;const a=(0,v.I0)(),i=(0,t.useRef)(null),x=(0,p.s0)(),[j,f]=(0,t.useState)({name:s.name,email:s.email,role:s.role}),[y,b]=(0,t.useState)({name:!1,email:!1,role:!1}),[C,{isLoading:N,isSuccess:k}]=(0,g.qK)(),[L,{isError:S,isLoading:E,isSuccess:M}]=(0,g.pj)(),[Z,D]=(0,t.useState)(!1),R=()=>D(!0),I=e=>{console.log(e.target.name),f({...j,[e.target.name]:e.target.value})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("form",{className:"user-edit-form",children:[(0,o.jsxs)("div",{className:"user-edit-form-input-container ",children:[(0,o.jsx)(n,{value:j.name,name:"name",title:"\u0406\u043c\u02bc\u044f",type:"text",handleChange:I,error:y.name,errorMessage:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043f\u043e\u043b\u0435"}),(0,o.jsx)(n,{value:j.email,name:"email",title:"Email",type:"text",handleChange:I,error:y.email,errorMessage:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0438\u0439 email"})]}),(0,o.jsx)(c,{title:"\u0420\u043e\u043b\u044c",handleChange:I,value:j.role,error:y.role,errorMessage:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c",placeholder:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c",options:u.p}),(0,o.jsxs)("div",{className:"user-edit-form-btn-wrapper gap-16-to-24",children:[(0,o.jsx)(h,{title:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",type:"button",classList:"",handleClick:()=>{a((0,w.fr)()),x("/users")}}),(0,o.jsx)(h,{title:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",type:"button",classList:"",handleClick:async()=>{if((()=>{const e={};return j.name?e.name=!1:e.name=!0,j.email&&/\S+@\S+\.\S+/.test(j.email)?e.email=!1:e.email=!0,j.role&&"none"!==j.role?e.role=!1:e.role=!0,b(e),Object.values(e).every((e=>!e))})())try{await L({id:s._id,email:j.email}).unwrap(),await C({id:s._id,role:j.role}).unwrap(),R()}catch(e){R()}},accent:!0})]})]}),(E||N)&&(0,o.jsx)(r.g4,{visible:!0,height:"80",width:"80",color:"#4fa94d",radius:"9",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:"loader-overlay ".concat(E||N?"loader-overlay-show":"")}),(0,o.jsxs)(d,{show:Z,onClose:()=>{var e;i&&(null===(e=i.current)||void 0===e||e.classList.toggle("modal-overlay-show")),setTimeout((()=>{D(!1),a((0,w.fr)()),x("/users")}),330)},overlayRef:i,children:[(0,o.jsx)("h1",{className:"modal-header",children:"\u0412\u0456\u0442\u0430\u044e!"}),(0,o.jsx)("p",{children:M&&k?"\u0414\u0430\u043d\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u0456":"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u043c\u0456\u043d\u0456 ".concat(S?"email":"\u0440\u043e\u043b\u0456"," \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430")}),M&&k?(0,o.jsx)("img",{src:m.Z,alt:"icon-check"}):(0,o.jsx)(l.Z,{classlist:"",id:"",name:"close",stroke:"#fff",width:"56",height:"56"})]})]})},j=()=>{const{id:e}=(0,p.UO)(),s=(0,v.I0)(),{data:a,isLoading:l,isError:n}=(0,g.Fk)(e);return(0,t.useEffect)((()=>{a&&a.user&&s((0,w.mR)(a.user))}),[a,s]),(0,o.jsxs)(o.Fragment,{children:[l&&(0,o.jsx)(r.g4,{visible:!0,height:"80",width:"80",color:"#4fa94d",radius:"9",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:"loader-overlay ".concat(l?"loader-overlay-show":"")}),n&&(0,o.jsx)("h1",{children:"ErrorAPI !!! on UserEditPage"}),a&&a.user&&(0,o.jsx)(x,{userData:a.user,roles:""})]})}}}]);
//# sourceMappingURL=256.6115f80c.chunk.js.map